<mvc:View controllerName="exam.exprogram10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:t="sap.ui.table"
    xmlns:c="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:w="sap.ui.webc.main"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds">
    <Page id="page" title="{i18n>title}">
    <l:HorizontalLayout>
        <VBox class="sapUiSmallMargin" >
            <Panel>
                <headerToolbar>
                    <Toolbar >
                        <w:Button icon="sap-icon://search" text="Search" design="Emphasized" click="onSearch" />
                    </Toolbar>
                </headerToolbar>
                <VBox class="sapUiSmallMargin">
                    <Label text="ID"/>
                    <Input id="input1" value="{search>/CategoryID}"/>
                </VBox>
                <VBox class="sapUiSmallMargin">
                    <Label text="Category Name"/>
                    <Input id="input2" value="{search>/CategoryName}"/>
                </VBox>
            </Panel>
        </VBox>
        <VBox class="sapUiSmallMargin" width="100%">
            <Panel expandable="true" expanded="true" width="960px">
                <headerToolbar>
                    <Toolbar >
                        <Text text="카테고리 조회" width="auto"/>
                    </Toolbar>
                </headerToolbar>
                    <Table 	
                        id="idTable"
                        sticky="HeaderToolbar,ColumnHeaders"
                        inset="false"
                        items="{/Categories}"
                        mode="SingleSelectMaster"
                        selectionChange="onSelectionChange"
                        class="sapFDynamicPageAlignContent"
                        width="auto"
                        growing="true"
                        growingThreshold="3">
					    <columns >
						    <Column width="auto">
							    <Text text="카테고리 ID" />
						    </Column>
                            <Column width="auto">
							    <Text text="카테고리명" />
						    </Column>
                            <Column width="auto">
							    <Text text="설명" />
						    </Column>
					    </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{CategoryID}" />
                                    <Text text="{CategoryName}" />
                                    <Text text="{Description}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </Panel>
            <l:HorizontalLayout>
            <VBox width="500px">
                <t:Table 	
                    id="idTable2"
                    rows="{/Products}"
                    selectionMode="Single"
                    rowActionCount="1"
                    paste="onPaste"
                    ariaLabelledBy="title"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                            <t:extension>
                                <OverflowToolbar>
                                    <content>
                                        <Title text="상품 조회" level="H2"/>
                                    </content>
                                </OverflowToolbar>
                            </t:extension>	
                            <t:columns>
                                <t:Column width="40px">
						            <Label textAlign="Center" text="ID" width="auto"/>
                                    <t:template>
                                        <Text text="{CategoryID}" />
                                    </t:template>
					            </t:Column>
                                <t:Column width="110px">
						            <Label textAlign="Left" text="상품명" width="auto"/>
                                    <t:template>
                                        <Text text="{ProductName}" />
                                    </t:template>
					            </t:Column>
                                <t:Column width="auto">
						            <Label textAlign="Right" text="재고" width="auto"/>
                                    <t:template>
                                        <Text text="{UnitsInStock}" textAlign="Right"/>
                                    </t:template>
					            </t:Column>
                                <t:Column width="110px">
						            <Label textAlign="Center" text="단위 주문 수량" width="auto"/>
                                    <t:template>
                                        <Text text="{UnitsOnOrder}" textAlign="Right"/>
                                    </t:template>
					            </t:Column>
								<t:Column width="110px">
						            <Label textAlign="Center" text="주문 가능여부" width="auto"/>
                                    <t:template>
                                        <c:Icon
											src="{=${UnitsInStock} > ${UnitsOnOrder} ? 'sap-icon://circle-task' : 'sap-icon://decline' }"
											class="size1"
											color="{=${UnitsInStock} > ${UnitsOnOrder} ? 'rgb(27, 234, 33)' : 'rgb(234, 52, 27)' }">
                            			</c:Icon>
                                    </t:template>
					            </t:Column>
                            </t:columns>
                        </t:Table>
            </VBox>

            <VBox width="400px">
                <viz:VizFrame 
                            id="idChart"
                            vizType="pie"
                            uiConfig="{ 'applicationSet' : 'fiori'}"
                            vizProperties="{
                                'title' : { 'text' : '상품별 매출량 비교' },
                                'plotArea' : {
                                    'drawingEffect' : 'glossy',
                                    'dataLabel' : { 'visible' : true, 'type' : 'value' },
                                    'colorPalette' : [ '#FFA7A7', '#FFE08C', '#FAED7D', '#CEF279', '#B2EBF4', '#B5B2FF']
                                }
                            }"
                            selectData="OselectData">
                        <viz:dataset>
                            <viz.data:FlattenedDataset data="{/Sales_by_Categories}">
                                <viz.data:dimensions> 
                                    <viz.data:DimensionDefinition name="ProductName" value="{ProductName}"/>
                                </viz.data:dimensions>

                                <viz.data:measures>
                                    <viz.data:MeasureDefinition name="ProductSales" value="{ProductSales}"/>
                                </viz.data:measures>
                            </viz.data:FlattenedDataset>
                        </viz:dataset>
                        <viz:feeds>
                            <viz.feeds:FeedItem uid="color" type="Dimension" values="ProductName"/>
                            <viz.feeds:FeedItem uid="size" type="Measure" values="ProductSales"/>
                        </viz:feeds>
                    </viz:VizFrame>	
            </VBox>
                

                        
            </l:HorizontalLayout>
                

                    
            </VBox>

    </l:HorizontalLayout>
</Page>
</mvc:View>
